---
title: "Message Queue"
description: "Queue and inject follow-up messages to running agents with live injection and auto-removal"
sidebarTitle: "Message Queue"
---

Send follow-up messages to running agents instantly, or queue them for later. Messages are injected into running processes immediately and **automatically removed** when successfully delivered.

## Overview

The message queue allows you to:
- **Inject messages into running agents** - Send instructions immediately without waiting
- **Auto-remove after delivery** - Successfully injected messages are removed from the queue
- **Queue for failed injections** - If injection fails, messages stay queued for retry
- **Manage pending messages** - Edit, reorder, or remove queued messages via the toolbar badge

## The Message Queue Badge

The message queue is accessed via a compact badge in the toolbar above the input area:

```text
◉ Queue (2)    ✉ Messages (3)                    Task Info
```

| Element | Description |
|---------|-------------|
| Queue badge | Shows todos count (left) |
| **Messages badge** | Shows queued messages count (middle) |
| Task Info | Opens task description (right) |

Click the **Messages** badge to open a popover with your queued messages.

<Tip>
The badge always displays (even with 0 messages) so the toolbar layout is consistent. On mobile, only icons are shown to save space.
</Tip>

## Adding Messages

While an agent is executing:

1. Type your follow-up message in the input field
2. Click **Add to Queue**
3. The message is injected AND automatically removed if successful

### Live Injection + Auto-Remove

When you add a message while an agent is actively running:

1. The message is immediately sent to the agent's stdin
2. The agent receives and processes your message in real-time
3. **On success**: The message is automatically removed from the queue
4. **On failure**: The message stays in the queue for retry

<Tip>
No need to manually clear injected messages! Successfully delivered messages are removed automatically, keeping your queue clean and focused on pending work.
</Tip>

<Tip>
Injected messages are marked with an "(injected)" label in the conversation history so you can easily identify them when reviewing later.
</Tip>

### Failure Handling

If injection fails (e.g., the process ended or isn't accepting input):
- The message remains in the queue
- It will be sent when execution resumes
- You'll see the queue count stay the same

## Queue Popover

Click the Messages badge to open the queue popover with controls:

| Action | Description |
|--------|-------------|
| Reorder (↑↓) | Change execution order |
| Edit | Click message text to edit inline |
| Remove (×) | Delete a single message (with confirmation) |
| Clear | Remove all queued messages |

### Editing Messages

Click on any message text to edit it inline:

1. Click the message content
2. Modify the text in the editor
3. Click **Save** or press **Escape** to cancel

If saving fails, the editor stays open so you can retry or fix the issue.

### Removing Messages

Click the × button to remove a message. You'll be asked to confirm before the message is deleted. This prevents accidental removal of important queued instructions.

## Queue Persistence

When the agent completes its current task:
- Queued messages are **NOT** automatically sent
- Messages stay in the queue until you manually inject or remove them
- This gives you full control over when follow-up messages are sent

<Tip>
You can use this to prepare messages while the agent is working, then inject them when you're ready. This prevents unintended automatic execution and gives you time to review the agent's output before sending follow-ups.
</Tip>

## How It Works Technically

The message queue uses a three-part approach:

1. **Queue Storage**: Messages are stored in an in-memory queue on the backend, ordered by position
2. **Live Injection**: When a process is running, messages are sent directly to the agent's stdin using the Claude Code protocol
3. **Auto-Removal**: When injection succeeds (`result.injected === true`), the message is automatically removed from the queue

This means:
- Messages persist across page refreshes (until server restart)
- Injection happens instantly without waiting for completion
- Successful injections automatically clean up the queue
- Failed injections keep your message queued for retry

## Mode/Variant

Injected messages always use the executor's **current mode**. The queue does not store or override variants - this keeps the behavior simple and predictable. Whatever mode the agent is currently running in (e.g., DEFAULT, PLAN) will be used for injected messages.

## Limits

- Maximum 50 messages per queue
- Queue is in-memory (cleared on server restart)
- One queue per task attempt

<Warning>
The message queue is stored in memory. If the Vibe Kanban server restarts, queued messages will be lost. For critical workflows, consider starting with a single message and queuing follow-ups after confirmation.
</Warning>

## Best Practices

### Send Corrections in Real-Time

With live injection, you can send corrections while the agent is still working:

1. Notice the agent is going in the wrong direction
2. Immediately send "Stop - use the existing auth library instead of implementing from scratch"
3. The agent receives this and adjusts its approach

### Planning Multi-Step Tasks

Queue related steps when you know the workflow:

1. "Set up the database schema for user authentication"
2. "Create the API endpoints for login and registration"
3. "Add the frontend login form"
4. "Write tests for the auth flow"

### Queue While Reviewing

As you review agent output, queue follow-ups:

1. Agent is working on implementation
2. You spot potential issues while reviewing
3. Queue "Also add input validation for email format"
4. The message is injected immediately and **removed from the queue** if successful
5. If injection fails, check the Messages badge - the count will reflect the queued message

## Responsive Design

The message queue toolbar adapts to different screen sizes:

| Screen Size | Toolbar Display |
|-------------|-----------------|
| Mobile (< 640px) | Icons only with count badges |
| Tablet/Desktop (≥ 640px) | Icons + labels + counts |

The popover also adapts:
- **Mobile**: Narrower width (288px)
- **Tablet**: Medium width (320px)
- **Desktop**: Full width (384px)

Touch targets are optimized with minimum 44px tap areas for mobile users.

## Related Documentation

- [Monitoring Task Execution](/core-features/monitoring-task-execution) - Real-time agent monitoring
- [Agent Configurations](/configuration-customisation/agent-configurations) - Set up agent profiles and variants
