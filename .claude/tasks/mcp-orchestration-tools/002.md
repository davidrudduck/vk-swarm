---
name: Add system templates constant to routes
status: open
created: 2026-01-19T12:00:00Z
updated: 2026-01-19T12:00:00Z
depends_on: ["001"]
conflicts_with: []
model_hint: simple
estimated_minutes: 15
---

# Task: Add system templates constant to routes

## Goal
Define hardcoded system templates in the templates route module.

## Context
System templates are built-in templates that are always available, regardless of database or Hive connection state. They provide common templates like "Bug Report", "Feature Request", etc.

The templates routes are in `crates/server/src/routes/templates.rs`. We need to add a constant array of system templates that will be included in the unified templates API.

**Current file structure** (lines 1-14):
```rust
use axum::{...};
use db::models::template::{CreateTemplate, Template, UpdateTemplate};
use deployment::Deployment;
use serde::Deserialize;
use ts_rs::TS;
use utils::response::ApiResponse;

use crate::{DeploymentImpl, error::ApiError, middleware::load_template_middleware};

#[derive(Deserialize, TS)]
pub struct TemplateSearchParams {...}
```

## Steps
1. Open `crates/server/src/routes/templates.rs`
2. After the imports (around line 14), add the `SystemTemplate` struct
3. Add the `SYSTEM_TEMPLATES` static array with 4 built-in templates

## Files to Modify
- `crates/server/src/routes/templates.rs` - Add struct and constant after line 14 (after the imports, before `TemplateSearchParams`)

## Code

Add this code after line 14 (after the `use crate::{...}` line, before `#[derive(Deserialize, TS)]`):

```rust

/// A built-in system template
struct SystemTemplate {
    id: &'static str,
    name: &'static str,
    content: &'static str,
    description: &'static str,
}

/// Built-in templates that are always available
static SYSTEM_TEMPLATES: &[SystemTemplate] = &[
    SystemTemplate {
        id: "system-bug-report",
        name: "Bug Report",
        content: "## Bug Description\nDescribe the bug clearly and concisely.\n\n## Steps to Reproduce\n1. Go to '...'\n2. Click on '...'\n3. See error\n\n## Expected Behavior\nDescribe what you expected to happen.\n\n## Actual Behavior\nDescribe what actually happened.",
        description: "Structured bug report template",
    },
    SystemTemplate {
        id: "system-feature-request",
        name: "Feature Request",
        content: "## Feature Description\nDescribe the feature you'd like to see.\n\n## Problem Statement\nWhat problem does this feature solve?\n\n## Proposed Solution\nDescribe how you think this should work.\n\n## Alternatives Considered\nAre there other ways to solve this?",
        description: "Feature request template",
    },
    SystemTemplate {
        id: "system-code-review",
        name: "Code Review Checklist",
        content: "## Code Review Checklist\n\n### Functionality\n- [ ] Code works as expected\n- [ ] Edge cases are handled\n- [ ] Error handling is appropriate\n\n### Code Quality\n- [ ] Code is readable and well-organized\n- [ ] No unnecessary complexity\n- [ ] DRY principle followed\n\n### Testing\n- [ ] Tests are included\n- [ ] Tests cover key scenarios",
        description: "Code review checklist template",
    },
    SystemTemplate {
        id: "system-quick-task",
        name: "Quick Task",
        content: "## Goal\nWhat needs to be accomplished?\n\n## Acceptance Criteria\n- [ ] \n\n## Notes\n",
        description: "Simple task template",
    },
];
```

## Verification
- [ ] Run `cargo check -p server` - should succeed with no errors
- [ ] 4 system templates defined (bug-report, feature-request, code-review, quick-task)
- [ ] Each template has id, name, content, and description fields

## Commit
`feat(server): add system templates constant`

## Notes
- The `SystemTemplate` struct is private (no `pub`) since it's only used within this module
- The IDs are prefixed with "system-" to distinguish them from local/swarm templates
- Content uses `\n` for newlines since these are Rust string literals
- The struct does NOT derive Serialize because it's only used internally for building UnifiedTemplate responses
