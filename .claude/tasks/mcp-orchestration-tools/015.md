---
name: Add stop_script to Project model
status: open
created: 2026-01-19T12:00:00Z
updated: 2026-01-19T12:00:00Z
depends_on: ["014"]
conflicts_with: []
model_hint: simple
estimated_minutes: 15
---

# Task: Add stop_script to Project model

## Goal
Add `stop_script` field to Project struct and related types.

## Context
After the migration adds the column to the database, the Rust model needs to be updated to include the field.

**File location**: `crates/db/src/models/project/mod.rs`

**Current Project struct** (lines 35-73):
```rust
#[derive(Debug, Clone, FromRow, Serialize, Deserialize, TS)]
pub struct Project {
    pub id: Uuid,
    pub name: String,
    pub git_repo_path: PathBuf,
    pub setup_script: Option<String>,
    pub dev_script: Option<String>,
    pub cleanup_script: Option<String>,
    pub copy_files: Option<String>,
    ...
}
```

**Current CreateProject struct** (lines 75-86):
```rust
#[derive(Debug, Deserialize, TS)]
pub struct CreateProject {
    pub name: String,
    pub git_repo_path: String,
    pub use_existing_repo: bool,
    pub clone_url: Option<String>,
    pub setup_script: Option<String>,
    pub dev_script: Option<String>,
    pub cleanup_script: Option<String>,
    pub copy_files: Option<String>,
}
```

**Current UpdateProject struct** (lines 88-97):
```rust
#[derive(Debug, Deserialize, TS)]
pub struct UpdateProject {
    pub name: Option<String>,
    pub git_repo_path: Option<String>,
    pub setup_script: Option<String>,
    pub dev_script: Option<String>,
    pub cleanup_script: Option<String>,
    pub copy_files: Option<String>,
    pub parallel_setup_script: Option<bool>,
}
```

## Steps
1. Add `stop_script: Option<String>` to `Project` struct after `cleanup_script`
2. Add `stop_script: Option<String>` to `CreateProject` struct after `cleanup_script`
3. Add `stop_script: Option<String>` to `UpdateProject` struct after `cleanup_script`

## Files to Modify
- `crates/db/src/models/project/mod.rs` - Add field to three structs

## Code

### Step 1: Update Project struct

Find line 42 (after `cleanup_script`):
```rust
    pub cleanup_script: Option<String>,
```

Add after it:
```rust
    pub stop_script: Option<String>,
```

### Step 2: Update CreateProject struct

Find line 84 (after `cleanup_script` in CreateProject):
```rust
    pub cleanup_script: Option<String>,
```

Add after it:
```rust
    pub stop_script: Option<String>,
```

### Step 3: Update UpdateProject struct

Find line 94 (after `cleanup_script` in UpdateProject):
```rust
    pub cleanup_script: Option<String>,
```

Add after it:
```rust
    pub stop_script: Option<String>,
```

## Verification
- [ ] Run `cargo check -p db` - should fail because queries don't include the field yet (expected)
- [ ] Field appears in all three structs
- [ ] Field type is `Option<String>` (nullable)

## Commit
`feat(db): add stop_script field to Project model`

## Notes
- This task will cause compilation errors until Task 016 updates the SQL queries
- The field order should match the order in the database schema for clarity
- The `#[ts(export)]` on Project struct means TypeScript types will be updated when `npm run generate-types` is run
