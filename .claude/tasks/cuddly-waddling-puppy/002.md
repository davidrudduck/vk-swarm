---
name: Add Remote Context to has_session_error Endpoint
status: open
created: 2026-01-11T11:04:49Z
updated: 2026-01-11T11:04:49Z
depends_on: []
conflicts_with: []
---

# Task: Add Remote Context to has_session_error Endpoint

## Description
Add `RemoteTaskAttemptContext` extraction to `has_session_error` handler and return `false` for remote tasks since sessions are local-only.

## Acceptance Criteria
- [ ] Handler signature includes `remote_ctx: Option<Extension<RemoteTaskAttemptContext>>`
- [ ] Remote tasks return `false` without querying local database
- [ ] Local behavior unchanged
- [ ] No HTTP 500 errors when accessing has-session-error endpoint for remote tasks

## Technical Details
- **File**: `crates/server/src/routes/task_attempts/handlers/core.rs` (line ~779)
- Sessions are local-only - remote tasks have no local session
- Add early return with `false` when `remote_ctx.is_some()`

## Code Location
```rust
// Current (line 779):
pub async fn has_session_error(
    Extension(task_attempt): Extension<TaskAttempt>,
    State(deployment): State<DeploymentImpl>,
) -> Result<ResponseJson<ApiResponse<bool>>, ApiError>

// Updated:
pub async fn has_session_error(
    Extension(task_attempt): Extension<TaskAttempt>,
    remote_ctx: Option<Extension<RemoteTaskAttemptContext>>,  // ADD
    State(deployment): State<DeploymentImpl>,
) -> Result<ResponseJson<ApiResponse<bool>>, ApiError>
```

## Dependencies
- [ ] None - independent of other changes

## Effort Estimate
- Size: XS
- Hours: 0.25

## Definition of Done
- [ ] Code implemented
- [ ] Handler returns false for remote tasks
- [ ] Build passes with `cargo check`
- [ ] Clippy passes
