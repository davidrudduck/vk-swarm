---
name: Add Missing Routes to by_task_id_router
status: completed
created: 2026-01-11T11:04:49Z
updated: 2026-01-12T22:00:00Z
depends_on: []
conflicts_with: []
---

# Task: Add Missing Routes to by_task_id_router

## Description
Add `/children`, `/has-session-error`, and `/fix-sessions` routes to the `by_task_id_router` to enable node-to-node proxy requests for these endpoints when viewing remote task attempts.

## Acceptance Criteria
- [x] `/children` route added to by_task_id_router
- [x] `/has-session-error` route added to by_task_id_router
- [x] `/fix-sessions` route added to by_task_id_router
- [x] Routes use same handlers as task_attempt_id_router
- [x] Build passes with `cargo check`
- [x] Clippy passes

## Technical Details
- **File**: `crates/server/src/routes/task_attempts/mod.rs`
- Routes enable node-to-node proxy for remote task attempt operations
- Uses `load_task_attempt_by_task_id_middleware` for loading task attempts by shared_task_id

## Code Changes Required
1. Add `.route("/children", get(get_task_attempt_children))` to by_task_id_router
2. Add `.route("/has-session-error", get(has_session_error))` to by_task_id_router
3. Add `.route("/fix-sessions", post(fix_sessions))` to by_task_id_router

## Dependencies
- [x] None - routes reuse existing handlers

## Effort Estimate
- Size: XS
- Hours: 0.5

## Definition of Done
- [x] All three routes added to by_task_id_router
- [x] Build passes with `cargo check`
- [x] Clippy passes
- [x] Browser verification shows no HTTP 500 errors

## Completion Notes
- Commit: e8862ac86
- All routes working correctly
- Verified via browser and direct API calls
