---
name: Add has_legacy_logs helper method
status: done
created: 2026-01-12T08:02:12Z
updated: 2026-01-13T10:20:00Z
depends_on: [007]
conflicts_with: [007, 009]
---

# Task: Add has_legacy_logs helper method

## Description
Add a helper method to LocalLogService that checks if legacy logs exist for an execution.

## Acceptance Criteria
- [x] Method checks execution_process_logs table for given execution_id
- [x] Returns true if any legacy logs exist, false otherwise
- [x] Method is private to the service

## Technical Details
- Location: `crates/services/src/services/unified_logs.rs`
- Name: `has_legacy_logs`
- Use sqlx::query_scalar for count query
- Return Result<bool, sqlx::Error>

## Code
```rust
impl LocalLogService {
    async fn has_legacy_logs(&self, execution_id: Uuid) -> Result<bool, sqlx::Error> {
        let count: i64 = sqlx::query_scalar!(
            r#"SELECT COUNT(*) as "count!: i64" FROM execution_process_logs WHERE execution_id = $1"#,
            execution_id
        )
        .fetch_one(&self.pool)
        .await?;
        Ok(count > 0)
    }
}
```

## Dependencies
- [x] Task 007 complete

## Effort Estimate
- Size: XS
- Hours: 0.5

## Definition of Done
- [x] Method implemented
- [x] Compiles without errors
