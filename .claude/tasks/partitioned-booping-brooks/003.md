---
name: Add idempotency test for stream_normalized_logs
status: done
created: 2026-01-12T08:02:12Z
updated: 2026-01-12T20:07:00Z
depends_on: [002]
conflicts_with: []
---

# Task: Add idempotency test for stream_normalized_logs

## Description
Add a test that verifies calling stream_normalized_logs twice on the same data produces identical results, confirming idempotent behavior.

## Acceptance Criteria
- [x] Test calls stream_normalized_logs twice on same data
- [x] Test asserts both outputs are identical
- [x] Test passes without any code changes (validates implementation)

## Technical Details
- Location: `crates/services/src/services/container.rs` (test module)
- Name: `test_stream_normalized_logs_idempotent`
- Collect results from first call, then call again with same input
- Compare output counts and optionally content

## Dependencies
- [x] Task 002 complete

## Effort Estimate
- Size: XS
- Hours: 0.5

## Definition of Done
- [x] Test written and passes
- [x] Code style matches existing tests
