---
name: Update UserMessage with i18n, Tooltip, and Accessibility
status: completed
created: 2026-01-12T00:33:13Z
updated: 2026-01-12T08:05:00Z
depends_on: [001, 002]
conflicts_with: []
---

# Task: Update UserMessage with i18n, Tooltip, and Accessibility

## Description
Update the UserMessage component to use i18n translations, wrap the injected indicator in a Tooltip component, add aria-label for accessibility, and apply subtle visual styling. This is the TDD Green Phase - implementing the code to make tests pass.

## Acceptance Criteria
- [x] Import useTranslation hook from react-i18next
- [x] Import Tooltip components from @/components/ui/tooltip
- [x] Add useTranslation hook call in component
- [x] Replace hardcoded "(injected)" with translated text
- [x] Wrap indicator in Tooltip component with explanatory text
- [x] Add aria-label attribute for screen readers
- [x] Add visual styling (border-l-2, pl-2)
- [x] All unit tests from Task 002 pass
- [x] TypeScript compiles without errors
- [x] ESLint shows no new warnings

## Technical Details
### Imports to Add
```tsx
import { useTranslation } from 'react-i18next';
import {
  Tooltip,
  TooltipContent,
  TooltipProvider,
  TooltipTrigger,
} from '@/components/ui/tooltip';
```

### Hook to Add
```tsx
const { t } = useTranslation('common');
```

### New Indicator JSX
```tsx
{isInjected && (
  <TooltipProvider>
    <Tooltip>
      <TooltipTrigger asChild>
        <span
          className="text-xs text-muted-foreground mb-1 block border-l-2 border-muted-foreground/30 pl-2"
          aria-label={t('conversation.injectedLabel')}
        >
          {t('conversation.injectedLabel')}
        </span>
      </TooltipTrigger>
      <TooltipContent side="top">
        {t('conversation.injectedTooltip')}
      </TooltipContent>
    </Tooltip>
  </TooltipProvider>
)}
```

### File to Modify
- `frontend/src/components/NormalizedConversation/UserMessage.tsx`

## Dependencies
- [ ] Task 001: i18n translation keys must exist
- [ ] Task 002: Unit tests must be created first

## Effort Estimate
- Size: S
- Hours: 0.5

## Definition of Done
- [x] Code implemented
- [x] Tests written and passing
- [x] Documentation updated
- [x] Code reviewed
- [x] Deployed to staging
