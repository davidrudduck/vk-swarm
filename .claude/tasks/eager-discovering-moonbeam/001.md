---
name: BackfillRequestTracker Core Tests
status: done
created: 2026-01-08T21:22:12Z
updated: 2026-01-08T21:22:12Z
depends_on: []
conflicts_with: []
---

# Task: BackfillRequestTracker Core Tests

## Description
Write unit tests for the BackfillRequestTracker struct that will track pending backfill requests. This follows TDD - write tests first (RED phase).

## Acceptance Criteria
- [x] Test `test_tracker_track_and_complete` - verifies tracking a request and completing it returns the attempt IDs
- [x] Test `test_tracker_clear_node` - verifies clearing a node's requests doesn't affect other nodes
- [x] Test `test_tracker_cleanup_stale` - verifies stale requests older than timeout are removed
- [x] All tests should fail initially (RED phase) since implementation doesn't exist yet

## Technical Details
- Location: `crates/remote/src/nodes/backfill.rs`
- Add `#[cfg(test)] mod tests` block with tokio tests
- Tests use `Uuid::new_v4()` for generating test IDs
- Tests need to manipulate `requested_at` timestamps for stale cleanup test

## Dependencies
- [x] None - this is the first task

## Effort Estimate
- Size: S
- Hours: 1

## Definition of Done
- [x] Test module added to backfill.rs
- [x] 3 async tests written
- [x] Tests compile but fail (no implementation yet)
- [x] Code passes `cargo clippy -p remote`
