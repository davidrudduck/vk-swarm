---
name: Integrate Tracker into BackfillService
status: done
created: 2026-01-08T21:22:12Z
updated: 2026-01-09T12:00:00Z
depends_on: [002]
conflicts_with: []
---

# Task: Integrate Tracker into BackfillService

## Description
Add the BackfillRequestTracker as a field in BackfillService and integrate it into the request methods.

## Acceptance Criteria
- [x] Add `tracker: Arc<BackfillRequestTracker>` field to BackfillService
- [x] Initialize tracker in `BackfillService::new()`
- [x] Add `tracker()` getter method that returns `Arc<BackfillRequestTracker>`
- [x] Call `tracker.track()` in `request_immediate_backfill()` after creating request
- [x] Call `tracker.track()` in `request_batch_backfill()` after creating request
- [x] Add cleanup of stale requests to `run_periodic_reconciliation()`

## Technical Details
- Location: `crates/remote/src/nodes/backfill.rs`
- Track requests with: `self.tracker.track(request.message_id, node_id, attempt_ids).await`
- Use `self.config.backfill_timeout_minutes` for stale cleanup threshold
- Log count of cleaned up stale requests

## Dependencies
- [ ] Task 002 - BackfillRequestTracker must be implemented

## Effort Estimate
- Size: S
- Hours: 1

## Definition of Done
- [x] BackfillService has tracker field
- [x] tracker() getter returns Arc clone
- [x] request methods track their requests
- [x] Periodic reconciliation cleans stale requests
- [x] `cargo check -p remote` passes
- [x] `cargo clippy -p remote -- -D warnings` passes
