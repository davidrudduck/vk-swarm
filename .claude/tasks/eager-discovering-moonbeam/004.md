---
name: Add reset_attempt_to_partial Repository Method
status: done
created: 2026-01-08T21:22:12Z
updated: 2026-01-09T00:00:00Z
depends_on: []
conflicts_with: []
---

# Task: Add reset_attempt_to_partial Repository Method

## Description
Add a new repository method to reset a specific attempt back to `partial` state when a backfill request fails.

## Acceptance Criteria
- [x] Add `reset_attempt_to_partial(&self, id: Uuid) -> Result<bool, NodeTaskAttemptError>` method
- [x] Method updates `sync_state` to 'partial' and clears `sync_requested_at`
- [x] Only updates if current state is 'pending_backfill'
- [x] Returns true if a row was updated, false otherwise

## Technical Details
- Location: `crates/remote/src/db/node_task_attempts.rs`
- Add after `reset_failed_backfill()` method (around line 316)
- SQL: `UPDATE node_task_attempts SET sync_state = 'partial', sync_requested_at = NULL WHERE id = $1 AND sync_state = 'pending_backfill'`

## Dependencies
- [x] None - can be done in parallel with other tasks

## Effort Estimate
- Size: XS
- Hours: 0.5

## Definition of Done
- [x] Method implemented
- [x] SQL query is correct
- [x] Returns bool for rows affected
- [x] `cargo check -p remote` passes
