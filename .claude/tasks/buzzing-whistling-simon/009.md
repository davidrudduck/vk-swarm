---
name: Update architecture documentation with transaction details
status: completed
created: 2026-01-16T02:45:11Z
updated: 2026-01-16T22:05:00Z
depends_on: [007, 008]
conflicts_with: []
---

# Task: Update architecture documentation with transaction details

## Description
Add a new section to the swarm-sync architecture documentation explaining the unlink operation's atomic transaction and the performance optimisation from the composite index.

## Acceptance Criteria
- [x] New "Unlink Operation" section added to docs/architecture/swarm-sync.mdx
- [x] Documents three atomic operations in transaction
- [x] Explains transaction rollback behaviour on failure
- [x] Documents the idx_tasks_project_shared index
- [x] Explains index optimisation for sync health queries
- [x] Documentation is clear and well-formatted
- [x] Links to relevant code locations if applicable

## Technical Details
- Location: `docs/architecture/swarm-sync.mdx`
- Add section after "Entity Linking States"
- Include transaction sequence: clear shared_task_id, clear hive_synced_at, set remote_project_id
- Document the composite index and its purpose

## Dependencies
- [x] Task 007 completed (transaction implementation)
- [x] Task 008 completed (composite index migration)

## Effort Estimate
- Size: XS
- Hours: 0.25

## Definition of Done
- [x] Documentation section added
- [x] Clearly explains unlink atomicity
- [x] Documents index purpose and benefit
- [x] Markdown properly formatted
- [x] Code committed with descriptive message
