---
name: Fix Cursor MCP status assignment
status: done
created: 2026-01-08T05:59:37Z
updated: 2026-01-09T10:15:00Z
depends_on: [008]
conflicts_with: []
---

# Task: Fix Cursor MCP status assignment

## Description
Fix the status assignment in Cursor executor's MCP result handling to correctly check `is_error` field and mark failures as `ToolStatus::Failed`.

## Acceptance Criteria
- [x] `is_error=true` results in `ToolStatus::Failed`
- [x] `is_error=false` results in `ToolStatus::Success`
- [x] `is_error=None` defaults to `ToolStatus::Success`
- [x] Tests from Task 008 pass

## Technical Details
- **File**: `crates/executors/src/executors/cursor.rs:384-410`

```rust
// Current (broken):
status: ToolStatus::Success,  // Always success

// Fixed:
status: if mcp_result.is_error.unwrap_or(false) {
    ToolStatus::Failed
} else {
    ToolStatus::Success
},
```

## Dependencies
- [x] Task 008: Write tests for MCP failure status

## Effort Estimate
- Size: XS
- Hours: 0.5

## Definition of Done
- [x] Code implemented
- [x] Tests from Task 008 pass
- [x] Build passes

## Implementation Notes
- Added `let mut tool_status = ToolStatus::Success;` at line 328
- In the MCP branch, `tool_status = r.extract_tool_status();` extracts status before consuming `r` with `into_markdown()`
- Changed line 432 from `status: ToolStatus::Success` to `status: tool_status`
- Uses the `extract_tool_status()` method added in Task 008
