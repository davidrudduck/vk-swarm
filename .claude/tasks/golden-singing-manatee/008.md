---
name: Write tests for MCP failure status
status: open
created: 2026-01-08T05:59:37Z
updated: 2026-01-08T05:59:37Z
depends_on: []
conflicts_with: []
---

# Task: Write tests for MCP failure status

## Description
Create tests to verify that MCP tool failures in Cursor executor are correctly marked as `ToolStatus::Failed` instead of always `Success`.

## Acceptance Criteria
- [ ] Test: `test_mcp_failure_marked_as_failed` - `is_error=true` results in Failed
- [ ] Test: `test_mcp_success_marked_as_success` - `is_error=false` results in Success
- [ ] Test: `test_mcp_missing_is_error_defaults_success` - `None` defaults to Success

## Technical Details
- **File**: `crates/executors/src/executors/cursor.rs` (tests module)

```rust
#[test]
fn test_mcp_failure_marked_as_failed() {
    let result = CursorMcpResult {
        is_error: Some(true),
        content: vec![Content { text: "Error occurred".to_string() }],
    };
    let status = extract_tool_status(&result);
    assert_eq!(status, ToolStatus::Failed);
}

#[test]
fn test_mcp_success_marked_as_success() {
    let result = CursorMcpResult {
        is_error: Some(false),
        content: vec![Content { text: "Success".to_string() }],
    };
    let status = extract_tool_status(&result);
    assert_eq!(status, ToolStatus::Success);
}

#[test]
fn test_mcp_missing_is_error_defaults_success() {
    let result = CursorMcpResult {
        is_error: None,
        content: vec![Content { text: "OK".to_string() }],
    };
    let status = extract_tool_status(&result);
    assert_eq!(status, ToolStatus::Success);
}
```

## Dependencies
- [ ] None

## Effort Estimate
- Size: S
- Hours: 1

## Definition of Done
- [ ] Tests written
- [ ] Tests compile
