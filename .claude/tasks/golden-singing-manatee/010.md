---
name: Audit and remove dead code in Copilot executor
status: done
created: 2026-01-08T05:59:37Z
updated: 2026-01-09T12:00:00Z
depends_on: []
conflicts_with: []
---

# Task: Audit and remove dead code in Copilot executor

## Description
Review and remove or annotate dead code in the Copilot executor, specifically `ToolCallState`, `CopilotToolEvent`, `CopilotFunction` structs and unused regexes at lines 525-566.

## Acceptance Criteria
- [x] Dead code at lines 525-566 either removed or annotated with clear TODO
- [x] No `#[allow(dead_code)]` without explanation
- [x] `cargo clippy` passes without dead_code warnings (if removed)
- [x] Decision documented in code comments if kept

## Technical Details
- **File**: `crates/executors/src/executors/copilot.rs:525-566`
- Review:
  - `ToolCallState` struct
  - `CopilotToolEvent` struct
  - `CopilotFunction` struct
  - Unused regexes at lines 557-566

**Option A**: Remove entirely
```rust
// Delete lines 525-566
```

**Option B**: Add clear TODO with reason
```rust
// TODO(copilot-jsonl): These structures will be used when Copilot CLI
// adds JSONL output support. See: https://github.com/...
#[allow(dead_code)]
struct ToolCallState { ... }
```

## Dependencies
- [x] None

## Effort Estimate
- Size: S
- Hours: 1

## Definition of Done
- [x] Code reviewed and decision made
- [x] Dead code removed or annotated
- [x] Clippy passes

## Completion Notes
Decision: **Option A - Remove entirely**

Removed the following dead code from `copilot.rs`:
- `ToolCallState` struct (lines 496-504)
- `CopilotToolEvent` enum (lines 506-520)
- `CopilotFunction` struct (lines 522-527)
- `handle_tool_event` function (lines 481-493)
- `TOOL_CALL_REGEX` and `FILE_OP_REGEX` lazy_static regexes (lines 529-539)
- Unused imports: `HashMap`, `lazy_static`, `ActionType`, `ToolStatus`

Also simplified `parse_log_line` from 6 parameters to 2 (removed tool_states tracking).

Git commit: `63da35f4a`
