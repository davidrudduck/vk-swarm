---
name: Write failing tests for retry button in TemplatePicker
status: done
created: 2026-01-11T10:25:38Z
updated: 2026-01-12T05:32:00Z
depends_on: [005]
conflicts_with: [007, 008]
---

# Task: Write failing tests for retry button in TemplatePicker

## Description
Following TDD principles, write failing tests for the retry button functionality in TemplatePicker before implementing the feature.

## Acceptance Criteria
- [x] Test: retry button shows when error and onRetry provided
- [x] Test: onRetry callback is called when button clicked
- [x] Test: retry button hidden when no error
- [x] Tests initially fail (red phase of TDD)

## Technical Details
- File: `frontend/src/components/tasks/__tests__/TemplatePicker.test.tsx`
- Create new describe block 'Retry Button'
- Use vitest and @testing-library/react

```typescript
describe('Retry Button', () => {
  it('shows retry button when error and onRetry provided', () => {
    const onRetry = vi.fn();
    render(<TemplatePicker {...baseProps} error="Failed" onRetry={onRetry} />);
    expect(screen.getByRole('button', { name: /retry/i })).toBeInTheDocument();
  });

  it('calls onRetry when retry button clicked', () => {
    const onRetry = vi.fn();
    render(<TemplatePicker {...baseProps} error="Failed" onRetry={onRetry} />);
    fireEvent.click(screen.getByRole('button', { name: /retry/i }));
    expect(onRetry).toHaveBeenCalledTimes(1);
  });

  it('hides retry button when no error', () => {
    render(<TemplatePicker {...baseProps} />);
    expect(screen.queryByRole('button', { name: /retry/i })).not.toBeInTheDocument();
  });
});
```

## Dependencies
- [x] i18n keys must be added (task 005)

## Effort Estimate
- Size: S
- Hours: 0.5

## Definition of Done
- [x] Tests written
- [x] Tests fail as expected (TDD red phase)

## Completion Notes
- Created `frontend/src/components/tasks/__tests__/TemplatePicker.test.tsx`
- Added 4 tests in 'Retry Button' describe block:
  1. `shows retry button when error and onRetry provided` - FAILS (expected - feature not implemented)
  2. `calls onRetry when retry button clicked` - FAILS (expected - feature not implemented)
  3. `hides retry button when no error` - PASSES (correct behavior)
  4. `hides retry button when error but no onRetry callback` - PASSES (correct behavior)
- TDD red phase confirmed: 2 tests fail because onRetry prop doesn't exist yet
