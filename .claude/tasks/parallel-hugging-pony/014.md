---
name: Add required mocks for TaskFormSheet tests
status: done
created: 2026-01-11T10:25:38Z
updated: 2026-01-12T10:02:00Z
depends_on: [013]
conflicts_with: [015, 016]
---

# Task: Add required mocks for TaskFormSheet tests

## Description
Add the necessary mocks at the top of the TaskFormSheet test file to enable component testing. The component has many dependencies that need to be mocked.

## Acceptance Criteria
- [x] react-i18next mock added
- [x] useMediaQuery hook mock added (desktop mode by default)
- [x] NiceModal mock added
- [x] All hooks from @/hooks mocked
- [x] File compiles without errors

## Technical Details
- File: `frontend/src/components/dialogs/tasks/__tests__/TaskFormSheet.test.tsx`
- Add before component import:

```typescript
import { render, screen, fireEvent, waitFor } from '@testing-library/react';
import { vi, describe, it, expect, beforeEach } from 'vitest';
import React from 'react';

// Mock react-i18next
vi.mock('react-i18next', () => ({
  useTranslation: () => ({
    t: (key: string, fallback?: string) => fallback || key,
    i18n: { changeLanguage: () => Promise.resolve(), language: 'en' }
  }),
}));

// Mock media query hook (desktop mode by default)
vi.mock('@/hooks/useMediaQuery', () => ({
  useMediaQuery: vi.fn(() => false),
}));

// Mock NiceModal
const mockRemove = vi.fn();
vi.mock('@ebay/nice-modal-react', () => ({
  useModal: () => ({ visible: true, remove: mockRemove }),
  create: (Component: React.ComponentType) => Component,
}));

// Mock all hooks from @/hooks
vi.mock('@/hooks', () => ({
  useProjectBranches: () => ({
    data: [{ name: 'main', is_current: true }],
    isLoading: false,
  }),
  useTaskImages: () => ({ data: [] }),
  useImageUpload: () => ({ upload: vi.fn(), deleteImage: vi.fn() }),
  useTaskMutations: () => ({
    createTask: { mutateAsync: vi.fn() },
    createAndStart: { mutateAsync: vi.fn() },
    updateTask: { mutateAsync: vi.fn() },
  }),
  useTaskAttempts: () => ({ data: [] }),
}));
```

## Dependencies
- [x] Session 3 complete (task 013)

## Effort Estimate
- Size: M
- Hours: 1

## Definition of Done
- [x] All mocks in place
- [x] Test file compiles
