---
name: Write template picker integration tests
status: done
created: 2026-01-11T10:25:38Z
updated: 2026-01-12T10:40:00Z
depends_on: [015]
conflicts_with: [014]
---

# Task: Write template picker integration tests

## Description
Write behavioral tests for TaskFormSheet that verify template picker integration, including button clicks, loading states, and error handling.

## Acceptance Criteria
- [x] Test: Insert Template button opens template picker
- [x] Test: Loading state shows spinner
- [x] Test: Error state shows retry button

## Technical Details
- File: `frontend/src/components/dialogs/tasks/__tests__/TaskFormSheet.test.tsx`
- Add to existing describe block:

```typescript
describe('Template Picker Integration', () => {
  it('opens template picker when Insert Template button is clicked', async () => {
    const { TaskFormSheetImpl } = await import('../TaskFormSheet');
    render(<TaskFormSheetImpl mode="create" projectId="test-123" />);
    const insertBtn = screen.getByRole('button', { name: /insert template/i });
    fireEvent.click(insertBtn);
    await waitFor(() => {
      expect(screen.getByText('Insert Template')).toBeInTheDocument();
    });
  });
});
```

## Dependencies
- [x] Desktop modal tests written (task 015)

## Effort Estimate
- Size: M
- Hours: 1

## Definition of Done
- [x] Tests written
- [x] Tests pass

## Implementation Notes
- Added `Template Picker Integration` describe block with 3 tests
- Tests verify: aria-label pattern, loading spinner with role="status", error state with retry button
- Added `useIsMobile` mock for TemplatePicker component support
- All 42 TaskFormSheet tests pass
- TypeScript compiles without errors
- Browser verification confirmed template picker opens correctly from task form
