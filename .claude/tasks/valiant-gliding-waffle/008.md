---
name: Write Tests for repair_sessions_index
status: complete
created: 2026-01-18T05:57:09Z
updated: 2026-01-19T00:30:00Z
depends_on: ['007']
conflicts_with: []
---

# Task: Write Tests for repair_sessions_index

## Description
Write comprehensive tests for the repair function covering: adds missing sessions, no-op when complete, handles missing index, handles malformed files.

## Acceptance Criteria
- [x] test_repair_adds_missing_sessions written and passes
- [x] test_repair_no_op_when_complete written and passes
- [x] test_repair_creates_new_index written and passes
- [x] test_repair_handles_malformed_files written and passes
- [x] All tests GREEN

## Technical Details
Test scenarios:
1. Index missing 2 sessions → repair adds them
2. Index complete → repair does nothing
3. No index exists → repair creates new one
4. Malformed .jsonl file → repair skips it, continues

Use tempfile::TempDir for test directories.

## Dependencies
- [x] 007

## Effort Estimate
- Size: S
- Hours: 1.5

## Definition of Done
- [x] All four tests written
- [x] Tests pass (GREEN phase)
- [x] Edge cases covered
- [x] Tests use isolated temp directories
