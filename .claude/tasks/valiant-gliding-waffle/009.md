---
name: Integrate Index Repair into ClaudeExecutor
status: complete
created: 2026-01-18T05:57:09Z
updated: 2026-01-19T01:00:00Z
depends_on: ['007', '008']
conflicts_with: []
---

# Task: Integrate Index Repair into ClaudeExecutor

## Description
Add call to repair_sessions_index before spawn_follow_up in ClaudeExecutor. Handle errors gracefully without blocking execution.

## Acceptance Criteria
- [x] repair call added to spawn_follow_up
- [x] Call happens before session resumption
- [x] Errors logged but don't fail execution
- [x] Tracing logs repair attempts
- [x] Code compiles and tests pass

## Technical Details
In crates/executors/src/executors/claude.rs:

```rust
async fn spawn_follow_up(
    &self,
    current_dir: &Path,
    prompt: &str,
    session_id: &str,
) -> Result<SpawnedChild, ExecutorError> {
    // Repair sessions-index.json if needed
    if let Err(e) = session_index::repair_sessions_index(current_dir).await {
        tracing::warn!(error = %e, "Failed to repair sessions index, continuing");
    }
    // ... existing code
}
```

## Dependencies
- [x] 007
- [x] 008

## Effort Estimate
- Size: S
- Hours: 0.75

## Definition of Done
- [x] Repair call added
- [x] Error handling correct
- [x] Logging in place
- [x] Code compiles
- [x] Tests pass
