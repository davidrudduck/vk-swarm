# NO_CONTEXT Agent Mode Feature

## Status: needs-review

## Completed Items

- [x] Added `no_context: Option<bool>` field to ClaudeCode struct
- [x] Added `no_context: Option<bool>` field to Codex struct
- [x] Added `no_context: Option<bool>` field to Gemini struct
- [x] Added `no_context: Option<bool>` field to Opencode struct
- [x] Added `no_context: Option<bool>` field to Amp struct
- [x] Added `no_context: Option<bool>` field to CursorAgent struct
- [x] Added `no_context: Option<bool>` field to QwenCode struct
- [x] Added `no_context: Option<bool>` field to Copilot struct
- [x] Added `no_context: Option<bool>` field to Droid struct
- [x] Added `no_context()` method to CodingAgent enum in `mod.rs`
- [x] Modified `follow_up` route to check no_context setting before session lookup
- [x] Added NO_CONTEXT variants to `default_profiles.json` for all 9 executors
- [x] Regenerated TypeScript types (`shared/types.ts`)
- [x] Regenerated JSON schemas (`shared/schemas/*.json`)
- [x] Build passes (`npm run check`)
- [x] Pushed to origin and created PR #81

## Remaining Work

- [ ] E2E browser testing to verify:
  - [ ] NO_CONTEXT mode appears in agent settings dropdown
  - [ ] Selecting NO_CONTEXT mode and sending follow-up message starts fresh session
  - [ ] Conversation history is NOT carried over when NO_CONTEXT is enabled

## Files Modified

### Executor Structs (9 files)
- `crates/executors/src/executors/claude.rs`
- `crates/executors/src/executors/codex.rs`
- `crates/executors/src/executors/gemini.rs`
- `crates/executors/src/executors/opencode.rs`
- `crates/executors/src/executors/amp.rs`
- `crates/executors/src/executors/cursor.rs`
- `crates/executors/src/executors/qwen.rs`
- `crates/executors/src/executors/copilot.rs`
- `crates/executors/src/executors/droid.rs`

### Core Logic
- `crates/executors/src/executors/mod.rs` - Added `no_context()` method
- `crates/server/src/routes/task_attempts.rs` - Modified `follow_up` to skip session on no_context

### Configuration
- `crates/executors/default_profiles.json` - Added NO_CONTEXT variants

### Generated Files
- `shared/types.ts` - TypeScript types
- `shared/schemas/*.json` - JSON schemas for all 9 executors

## Next Session Recommendations

1. Start the dev server (`pnpm run dev`)
2. Navigate to Settings -> Agents
3. Verify NO_CONTEXT appears as a mode option for each executor
4. Test the feature by:
   - Starting a task with default mode
   - Sending a follow-up with NO_CONTEXT mode selected
   - Verifying the conversation starts fresh (no prior context)

## PR

https://github.com/davidrudduck/vibe-kanban/pull/81
