# Bloat Removal Progress

**Plan file**: `/home/david/.claude/plans/dazzling-swinging-moore.md`
**Branch**: `dr/9484-bloat-removal`
**Status**: needs-review

## Session 1: Remove `react-window` (Unused Dependency) - COMPLETE

### Goal
Remove the unused `react-window` dependency from the frontend.

### Status: Completed

### Completed Items
- [x] Verified `react-window` is not used in codebase (only a comment reference in `logs.ts`)
- [x] Removed `react-window` dependency from `frontend/package.json`
- [x] Removed `@types/react-window` dependency from `frontend/package.json`
- [x] Updated comment in `frontend/src/types/logs.ts` to remove react-window reference
- [x] Ran `pnpm install` to update lockfile
- [x] Build passed successfully (`pnpm run build`)
- [x] Lint passed (255 pre-existing i18n warnings, no new issues)
- [x] TypeScript check passed (`npx tsc --noEmit`)
- [x] Browser testing completed:
  - Desktop view: working
  - Tablet view (768x1024): working
  - Mobile view (375x812): working
  - Dark mode: working
  - No react-window related console errors

### Files Modified
1. `frontend/package.json` - Removed 2 dependencies:
   - `"react-window": "^1.8.11"`
   - `"@types/react-window": "^1.8.8"`
2. `frontend/src/types/logs.ts` - Updated comment (removed "react-window key" reference)
3. `pnpm-lock.yaml` - Auto-updated

---

## Session 2: Remove Discord Link - COMPLETE

### Goal
Remove the Discord link from the navbar and all related configuration.

### Status: Completed

### Completed Items
- [x] Verified `useDiscordOnlineCount.ts` was already deleted (from previous session)
- [x] Removed Discord entry from `EXTERNAL_LINKS` array in `Navbar.tsx`
- [x] Removed unused `MessageCircle` import from `Navbar.tsx`
- [x] Build passed successfully (`pnpm run build`)
- [x] Lint passed (255 pre-existing i18n warnings, no new issues)
- [x] Backend tests passed (329 tests)
- [x] Browser testing completed:
  - Desktop view (1280x800): working, no Discord link in menu
  - Tablet view (768x1024): working, no Discord link in menu
  - Mobile view (375x812): working, no Discord link in menu
  - Dark mode: working, no Discord link in menu
  - No console errors

### Files Modified
1. `frontend/src/components/layout/Navbar.tsx`:
   - Removed `MessageCircle` from lucide-react imports
   - Removed Discord entry from `EXTERNAL_LINKS` array

### Notes
- The `useDiscordOnlineCount.ts` hook file was already deleted in a previous session
- The `hide_discord_link` setting was already removed from `DevBannerConfig` in `v8.rs`
- No Discord translation keys were found in i18n files (only English settings.json was checked, others didn't have Discord keys)

---

## Session 3: Remove Showcase/Onboarding Videos - COMPLETE

### Goal
Remove the showcase/onboarding video components and configuration from the codebase.

### Status: Completed

### Completed Items
- [x] Deleted showcase-related frontend files:
  - `frontend/src/config/showcases.ts`
  - `frontend/src/hooks/useVideoProgress.ts`
  - `frontend/src/components/dialogs/global/FeatureShowcaseDialog.tsx`
  - `frontend/src/components/showcase/ShowcaseStageMedia.tsx`
  - `frontend/src/types/showcase.ts`
- [x] Modified `frontend/src/pages/ProjectTasks.tsx`:
  - Removed `FeatureShowcaseDialog` import
  - Removed `showcases` import
  - Removed `useUserSystem` import (no longer used)
  - Removed showcase display logic (showcaseId, seenFeatures, seen, useEffect)
- [x] Removed `ShowcaseState` struct from Rust config versions:
  - `crates/services/src/services/config/versions/v7.rs` - Removed ShowcaseState struct definition
  - `crates/services/src/services/config/versions/v8.rs` - Removed ShowcaseState re-export and showcases field
  - `crates/services/src/services/config/versions/v9.rs` - Removed ShowcaseState re-export and showcases field
  - `crates/services/src/services/config/mod.rs` - Removed ShowcaseState type export
  - `crates/server/src/bin/generate_types.rs` - Removed ShowcaseState type generation
- [x] Updated tests in v9.rs to remove showcase JSON from test fixtures
- [x] Removed showcase translation keys from i18n files (4 files):
  - `frontend/src/i18n/locales/en/tasks.json`
  - `frontend/src/i18n/locales/es/tasks.json`
  - `frontend/src/i18n/locales/ja/tasks.json`
  - `frontend/src/i18n/locales/ko/tasks.json`
- [x] Backend build passed (`cargo build --workspace`)
- [x] Backend tests passed (`cargo test --workspace`)
- [x] Frontend build passed (`pnpm run build`)
- [x] Frontend lint passed (255 pre-existing i18n warnings, no new issues)
- [x] TypeScript check passed (`npx tsc --noEmit`)
- [x] TypeScript types regenerated (`pnpm -w run generate-types`)
- [x] Browser testing completed:
  - Desktop view (1280x800): working
  - Mobile view (375x812): working
  - Settings page: working
  - No JavaScript errors related to showcase removal
  - Note: Database errors during testing were environmental (worktree db setup), not related to code changes

### Files Deleted
1. `frontend/src/config/showcases.ts`
2. `frontend/src/hooks/useVideoProgress.ts`
3. `frontend/src/components/dialogs/global/FeatureShowcaseDialog.tsx`
4. `frontend/src/components/showcase/ShowcaseStageMedia.tsx`
5. `frontend/src/types/showcase.ts`

### Files Modified
1. `frontend/src/pages/ProjectTasks.tsx` - Removed showcase imports and logic
2. `crates/services/src/services/config/versions/v7.rs` - Removed ShowcaseState struct and showcases field
3. `crates/services/src/services/config/versions/v8.rs` - Removed ShowcaseState re-export and showcases field
4. `crates/services/src/services/config/versions/v9.rs` - Removed ShowcaseState re-export, showcases field, and test fixtures
5. `crates/services/src/services/config/mod.rs` - Removed ShowcaseState type export
6. `crates/server/src/bin/generate_types.rs` - Removed ShowcaseState type generation
7. `frontend/src/i18n/locales/en/tasks.json` - Removed showcases translation keys
8. `frontend/src/i18n/locales/es/tasks.json` - Removed showcases translation keys
9. `frontend/src/i18n/locales/ja/tasks.json` - Removed showcases translation keys
10. `frontend/src/i18n/locales/ko/tasks.json` - Removed showcases translation keys

---

## Remaining Work (Future Sessions)

| Session | Focus | Status |
|---------|-------|--------|
| 1 | Remove react-window | **Completed** |
| 2 | Remove Discord Link | **Completed** |
| 3 | Remove Showcase/Onboarding Videos | **Completed** |
| 4 | Remove PostHog Analytics (Frontend) | Pending |
| 5 | Remove PostHog Analytics (Backend) | Pending |
| 6 | Remove Sentry (Frontend) | Pending |
| 7 | Remove Sentry (Backend) | Pending |
| 8 | Final Verification & Cleanup | Pending |

### Next Session Recommendations
- Continue with Session 4: Remove PostHog Analytics (Frontend)
- This involves removing the posthog-js package and all PostHog tracking calls
