# Task Archive Fixes 2

## Status: in-progress

## Overview
Bug fixes for task archiving UI issues in the Kanban board.

## Plan Reference
`/home/david/.claude/plans/serialized-purring-porcupine.md`

---

## Session 1: TaskCard UI Improvements

### Objectives
1. Remove redundant "Archived" badge from TaskCard header (archive icon at bottom already indicates state)
2. Combine task labels and archive icon on the same horizontal line at the bottom of each card

### Completed Items
- [x] Removed "Archived" badge JSX from TaskCard header's `right` prop
- [x] Removed unused `Archive` import from lucide-react
- [x] Removed unused `Badge` import from @/components/ui/badge
- [x] Restructured bottom section to combine labels and archive icon on same line using flexbox
- [x] Ran lint check (ESLint) - no errors in TaskCard.tsx
- [x] Ran format check (Prettier) - passes
- [x] Ran TypeScript type check - no errors

### Test Results

#### Visual Testing ✅

| Viewport | Dark Mode | Light Mode |
|----------|-----------|------------|
| Desktop (default) | ✅ | ✅ |
| Mobile (375x667) | ✅ | ✅ |
| Tablet (768x1024) | ✅ | ✅ |

Screenshots saved:
- `.playwright-mcp/desktop-light-mode.png`
- `.playwright-mcp/mobile-light-mode.png`
- `.playwright-mcp/tablet-light-mode.png`

#### Validation Results
- Labels display correctly with icons on the left side of each card's bottom row
- Archive icon displays correctly on the right side of each card's bottom row
- No "Archived" badge appears in card headers
- Layout works correctly at all responsive breakpoints
- No contrast issues in light or dark mode
- Console shows no errors related to changes (only pre-existing React Router warnings)

### Code Changes

**File: `frontend/src/components/tasks/TaskCard.tsx`**

1. **Removed imports** (lines 3-10):
   - Removed `Archive` from lucide-react imports
   - Removed `Badge` import

2. **Removed "Archived" badge from header** (deleted lines ~217-225):
   ```tsx
   // REMOVED:
   {isArchived && (
     <Badge variant="secondary" className="gap-1 px-1.5 py-0.5 text-xs">
       <Archive className="h-3 w-3" />
       {t('badges.archived')}
     </Badge>
   )}
   ```

3. **Restructured bottom section** (lines ~267-280):
   ```tsx
   {/* Labels and Archive Icon - same line */}
   <div className="flex items-center justify-between gap-2">
     <div className="flex flex-wrap gap-1 flex-1 min-w-0">
       {labels?.map((label) => (
         <LabelBadge key={label.id} label={label} size="sm" />
       ))}
     </div>
     <ArchiveToggleIcon
       isArchived={isArchived}
       onArchive={handleArchive}
       onUnarchive={handleUnarchive}
       disabled={task.is_remote || isArchiving}
     />
   </div>
   ```

---

## Session 2: Pending

### Objectives (from plan)
- Fix immediate visibility updates when archiving/unarchiving tasks
- Tasks should disappear immediately when archived (if "show archives" is disabled)

### Status
Not started - will be completed in a separate session.

---

## Files Changed

| File | Change |
|------|--------|
| `frontend/src/components/tasks/TaskCard.tsx` | Removed "Archived" badge, combined labels + archive icon on same line |
